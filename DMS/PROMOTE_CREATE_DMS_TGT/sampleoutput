[ec2-user@ip-10-0-2-111 CDC_AFTER_PROMOTERR]$ ./promote_rr.py ttsora10 ttsora50
2023.05.29 21:19:35 : SCN : 320998683
2023.05.29 21:19:35 : ttsora10 : available : arn:aws:rds:us-east-2:012363508593:db:ttsora10
2023.05.29 21:19:35 : ttsora50 : available : arn:aws:rds:us-east-2:012363508593:db:ttsora50
2023.05.29 21:19:35 : Promoting Read Replica.
2023.05.29 21:20:35 : RR promoted.
2023.05.29 21:21:06 : Waiting for RR to become available - current status:modifying
2023.05.29 21:21:36 : Waiting for RR to become available - current status:modifying
2023.05.29 21:22:06 : Waiting for RR to become available - current status:modifying
2023.05.29 21:22:36 : Waiting for RR to become available - current status:modifying
2023.05.29 21:23:07 : Waiting for RR to become available - current status:modifying
2023.05.29 21:23:37 : Waiting for RR to become available - current status:modifying
2023.05.29 21:24:07 : Waiting for RR to become available - current status:rebooting
2023.05.29 21:24:37 : Waiting for RR to become available - current status:rebooting
2023.05.29 21:25:07 : Waiting for RR to become available - current status:rebooting
2023.05.29 21:25:38 : Waiting for RR to become available - current status:backing-up
2023.05.29 21:26:08 : Waiting for RR to become available - current status:backing-up
2023.05.29 21:26:38 : Waiting for RR to become available - current status:backing-up
2023.05.29 21:27:08 : Waiting for RR to become available - current status:backing-up
2023.05.29 21:27:38 : Waiting for RR to become available - current status:backing-up
2023.05.29 21:28:09 : Waiting for RR to become available - current status:backing-up
2023.05.29 21:28:39 : Waiting for RR to become available - current status:backing-up
2023.05.29 21:29:09 : Waiting for RR to become available - current status:backing-up
2023.05.29 21:29:39 : Waiting for RR to become available - current status:available
2023.05.29 21:29:39 : Promoted RR Host : ttsora50.ciushqttrpqx.us-east-2.rds.amazonaws.com
2023.05.29 21:29:39 : Promoted RR Port : 1521
2023.05.29 21:29:39 : Promoted RR DBName : TTSORA10
2023.05.29 21:29:39 : Promoted RR DBInstanceArn : arn:aws:rds:us-east-2:012363508593:db:ttsora50
2023.05.29 21:29:39 : Source DMS Endpoint: arn:aws:dms:us-east-2:012363508593:endpoint:NU3L5VIOBDWI6KWTF2YJ5IKDZG7DPNI6H7Y4OOA
2023.05.29 21:29:40 : Created DMS endpoint for RR DBInstanceArn : arn:aws:rds:us-east-2:012363508593:db:ttsora50
2023.05.29 21:29:40 : Waiting for Promoted RR DMS endpoint to test successfully - current status : testing
2023.05.29 21:30:10 : Waiting for Promoted RR DMS endpoint to test successfully - current status : testing
2023.05.29 21:30:40 : Waiting for Promoted RR DMS endpoint to test successfully - current status : testing
2023.05.29 21:31:10 : Waiting for Promoted RR DMS endpoint to test successfully - current status : successful
2023.05.29 21:31:10 : Target DMS Endpoint: arn:aws:dms:us-east-2:012363508593:endpoint:3PJAVH5Y3JYJPM4MOS3MDA5W6M6QOIHZGZQQQEQ
2023.05.29 21:31:11 : {'ReplicationTask': {'ReplicationTaskIdentifier': 'tts100', 'SourceEndpointArn': 'arn:aws:dms:us-east-2:012363508593:endpoint:NU3L5VIOBDWI6KWTF2YJ5IKDZG7DPNI6H7Y4OOA', 'TargetEndpointArn': 'arn:aws:dms:us-east-2:012363508593:endpoint:3PJAVH5Y3JYJPM4MOS3MDA5W6M6QOIHZGZQQQEQ', 'ReplicationInstanceArn': 'arn:aws:dms:us-east-2:012363508593:rep:D2JPCUIHZYVACQINWOBP5KC2UCAQFT2E3QZFLIA', 'MigrationType': 'cdc', 'TableMappings': '{"rules": [{"rule-type": "selection", "rule-id": "1", "rule-name": "1", "object-locator": {"schema-name": "%", "table-name": "%"}, "rule-action": "include"}, {"rule-type": "transformation", "rule-id": "2", "rule-name": "2", "rule-action": "rename", "rule-target": "schema", "object-locator": {"schema-name": "CUSTOMER_ORDERS"}, "value": "CUSTOMER_ORDERS"}]}', 'ReplicationTaskSettings': '{"Logging":{"EnableLogging":true,"EnableLogContext":false,"LogComponents":[{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"TRANSFORMATION"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"SOURCE_UNLOAD"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"IO"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"TARGET_LOAD"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"PERFORMANCE"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"SOURCE_CAPTURE"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"SORTER"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"REST_SERVER"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"VALIDATOR_EXT"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"TARGET_APPLY"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"TASK_MANAGER"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"TABLES_MANAGER"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"METADATA_MANAGER"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"FILE_FACTORY"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"COMMON"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"ADDONS"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"DATA_STRUCTURE"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"COMMUNICATION"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"FILE_TRANSFER"}],"CloudWatchLogGroup":"dms-tasks-tts-rep1","CloudWatchLogStream":"dms-task-MMO6WJX5CZ3A32VGGMTAL2UIMVW5BDOHLPFPRHI"},"StreamBufferSettings":{"StreamBufferCount":3,"CtrlStreamBufferSizeInMB":5,"StreamBufferSizeInMB":8},"ErrorBehavior":{"FailOnNoTablesCaptured":true,"ApplyErrorUpdatePolicy":"LOG_ERROR","FailOnTransactionConsistencyBreached":false,"RecoverableErrorThrottlingMax":1800,"DataErrorEscalationPolicy":"SUSPEND_TABLE","ApplyErrorEscalationCount":0,"RecoverableErrorStopRetryAfterThrottlingMax":true,"RecoverableErrorThrottling":true,"ApplyErrorFailOnTruncationDdl":false,"DataTruncationErrorPolicy":"LOG_ERROR","ApplyErrorInsertPolicy":"LOG_ERROR","EventErrorPolicy":"IGNORE","ApplyErrorEscalationPolicy":"LOG_ERROR","RecoverableErrorCount":-1,"DataErrorEscalationCount":0,"TableErrorEscalationPolicy":"STOP_TASK","RecoverableErrorInterval":5,"ApplyErrorDeletePolicy":"IGNORE_RECORD","TableErrorEscalationCount":0,"FullLoadIgnoreConflicts":true,"DataErrorPolicy":"LOG_ERROR","TableErrorPolicy":"SUSPEND_TABLE"},"TTSettings":{"TTS3Settings":null,"TTRecordSettings":null,"EnableTT":false},"FullLoadSettings":{"CommitRate":10000,"StopTaskCachedChangesApplied":false,"StopTaskCachedChangesNotApplied":false,"MaxFullLoadSubTasks":8,"TransactionConsistencyTimeout":600,"CreatePkAfterFullLoad":false,"TargetTablePrepMode":"DO_NOTHING"},"TargetMetadata":{"ParallelApplyBufferSize":0,"ParallelApplyQueuesPerThread":0,"ParallelApplyThreads":0,"TargetSchema":"admin","InlineLobMaxSize":0,"ParallelLoadQueuesPerThread":0,"SupportLobs":true,"LobChunkSize":64,"TaskRecoveryTableEnabled":false,"ParallelLoadThreads":0,"LobMaxSize":32,"BatchApplyEnabled":false,"FullLobMode":false,"LimitedSizeLobMode":true,"LoadMaxFileSize":0,"ParallelLoadBufferSize":0},"BeforeImageSettings":null,"ControlTablesSettings":{"historyTimeslotInMinutes":5,"HistoryTimeslotInMinutes":5,"StatusTableEnabled":false,"SuspendedTablesTableEnabled":false,"HistoryTableEnabled":false,"ControlSchema":"","FullLoadExceptionTableEnabled":false},"LoopbackPreventionSettings":null,"CharacterSetSettings":null,"FailTaskWhenCleanTaskResourceFailed":false,"ChangeProcessingTuning":{"StatementCacheSize":50,"CommitTimeout":1,"BatchApplyPreserveTransaction":true,"BatchApplyTimeoutMin":1,"BatchSplitSize":0,"BatchApplyTimeoutMax":30,"MinTransactionSize":1000,"MemoryKeepTime":60,"BatchApplyMemoryLimit":500,"MemoryLimitTotal":1024},"ChangeProcessingDdlHandlingPolicy":{"HandleSourceTableDropped":true,"HandleSourceTableTruncated":true,"HandleSourceTableAltered":true},"PostProcessingRules":null}', 'Status': 'creating', 'ReplicationTaskCreationDate': datetime.datetime(2023, 5, 29, 21, 31, 11, 127000, tzinfo=tzlocal()), 'CdcStartPosition': '320998683', 'ReplicationTaskArn': 'arn:aws:dms:us-east-2:012363508593:task:MMO6WJX5CZ3A32VGGMTAL2UIMVW5BDOHLPFPRHI'}, 'ResponseMetadata': {'RequestId': '095eb91f-8f3f-4c8e-9c41-1cc32fbf2392', 'HTTPStatusCode': 200, 'HTTPHeaders': {'x-amzn-requestid': '095eb91f-8f3f-4c8e-9c41-1cc32fbf2392', 'date': 'Mon, 29 May 2023 21:31:11 GMT', 'content-type': 'application/x-amz-json-1.1', 'content-length': '5156'}, 'RetryAttempts': 0}}
2023.05.29 21:31:41 : Waiting for Replication Task to be in ready mode - current status : creating
2023.05.29 21:32:11 : Waiting for Replication Task to be in ready mode - current status : creating
2023.05.29 21:32:41 : Waiting for Replication Task to be in ready mode - current status : ready
2023.05.29 21:32:41 : {'ReplicationTask': {'ReplicationTaskIdentifier': 'tts100', 'SourceEndpointArn': 'arn:aws:dms:us-east-2:012363508593:endpoint:NU3L5VIOBDWI6KWTF2YJ5IKDZG7DPNI6H7Y4OOA', 'TargetEndpointArn': 'arn:aws:dms:us-east-2:012363508593:endpoint:3PJAVH5Y3JYJPM4MOS3MDA5W6M6QOIHZGZQQQEQ', 'ReplicationInstanceArn': 'arn:aws:dms:us-east-2:012363508593:rep:D2JPCUIHZYVACQINWOBP5KC2UCAQFT2E3QZFLIA', 'MigrationType': 'cdc', 'TableMappings': '{"rules": [{"rule-type": "selection", "rule-id": "1", "rule-name": "1", "object-locator": {"schema-name": "%", "table-name": "%"}, "rule-action": "include"}, {"rule-type": "transformation", "rule-id": "2", "rule-name": "2", "rule-action": "rename", "rule-target": "schema", "object-locator": {"schema-name": "CUSTOMER_ORDERS"}, "value": "CUSTOMER_ORDERS"}]}', 'ReplicationTaskSettings': '{"Logging":{"EnableLogging":true,"EnableLogContext":false,"LogComponents":[{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"TRANSFORMATION"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"SOURCE_UNLOAD"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"IO"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"TARGET_LOAD"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"PERFORMANCE"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"SOURCE_CAPTURE"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"SORTER"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"REST_SERVER"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"VALIDATOR_EXT"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"TARGET_APPLY"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"TASK_MANAGER"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"TABLES_MANAGER"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"METADATA_MANAGER"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"FILE_FACTORY"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"COMMON"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"ADDONS"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"DATA_STRUCTURE"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"COMMUNICATION"},{"Severity":"LOGGER_SEVERITY_DEFAULT","Id":"FILE_TRANSFER"}],"CloudWatchLogGroup":"dms-tasks-tts-rep1","CloudWatchLogStream":"dms-task-MMO6WJX5CZ3A32VGGMTAL2UIMVW5BDOHLPFPRHI"},"StreamBufferSettings":{"StreamBufferCount":3,"CtrlStreamBufferSizeInMB":5,"StreamBufferSizeInMB":8},"ErrorBehavior":{"FailOnNoTablesCaptured":true,"ApplyErrorUpdatePolicy":"LOG_ERROR","FailOnTransactionConsistencyBreached":false,"RecoverableErrorThrottlingMax":1800,"DataErrorEscalationPolicy":"SUSPEND_TABLE","ApplyErrorEscalationCount":0,"RecoverableErrorStopRetryAfterThrottlingMax":true,"RecoverableErrorThrottling":true,"ApplyErrorFailOnTruncationDdl":false,"DataTruncationErrorPolicy":"LOG_ERROR","ApplyErrorInsertPolicy":"LOG_ERROR","EventErrorPolicy":"IGNORE","ApplyErrorEscalationPolicy":"LOG_ERROR","RecoverableErrorCount":-1,"DataErrorEscalationCount":0,"TableErrorEscalationPolicy":"STOP_TASK","RecoverableErrorInterval":5,"ApplyErrorDeletePolicy":"IGNORE_RECORD","TableErrorEscalationCount":0,"FullLoadIgnoreConflicts":true,"DataErrorPolicy":"LOG_ERROR","TableErrorPolicy":"SUSPEND_TABLE"},"TTSettings":{"TTS3Settings":null,"TTRecordSettings":null,"EnableTT":false},"FullLoadSettings":{"CommitRate":10000,"StopTaskCachedChangesApplied":false,"StopTaskCachedChangesNotApplied":false,"MaxFullLoadSubTasks":8,"TransactionConsistencyTimeout":600,"CreatePkAfterFullLoad":false,"TargetTablePrepMode":"DO_NOTHING"},"TargetMetadata":{"ParallelApplyBufferSize":0,"ParallelApplyQueuesPerThread":0,"ParallelApplyThreads":0,"TargetSchema":"admin","InlineLobMaxSize":0,"ParallelLoadQueuesPerThread":0,"SupportLobs":true,"LobChunkSize":64,"TaskRecoveryTableEnabled":false,"ParallelLoadThreads":0,"LobMaxSize":32,"BatchApplyEnabled":false,"FullLobMode":false,"LimitedSizeLobMode":true,"LoadMaxFileSize":0,"ParallelLoadBufferSize":0},"BeforeImageSettings":null,"ControlTablesSettings":{"historyTimeslotInMinutes":5,"HistoryTimeslotInMinutes":5,"StatusTableEnabled":false,"SuspendedTablesTableEnabled":false,"HistoryTableEnabled":false,"ControlSchema":"","FullLoadExceptionTableEnabled":false},"LoopbackPreventionSettings":null,"CharacterSetSettings":null,"FailTaskWhenCleanTaskResourceFailed":false,"ChangeProcessingTuning":{"StatementCacheSize":50,"CommitTimeout":1,"BatchApplyPreserveTransaction":true,"BatchApplyTimeoutMin":1,"BatchSplitSize":0,"BatchApplyTimeoutMax":30,"MinTransactionSize":1000,"MemoryKeepTime":60,"BatchApplyMemoryLimit":500,"MemoryLimitTotal":1024},"ChangeProcessingDdlHandlingPolicy":{"HandleSourceTableDropped":true,"HandleSourceTableTruncated":true,"HandleSourceTableAltered":true},"PostProcessingRules":null}', 'Status': 'starting', 'ReplicationTaskCreationDate': datetime.datetime(2023, 5, 29, 21, 31, 11, 127000, tzinfo=tzlocal()), 'ReplicationTaskStartDate': datetime.datetime(2023, 5, 29, 21, 32, 41, 788000, tzinfo=tzlocal()), 'CdcStartPosition': '320998683', 'ReplicationTaskArn': 'arn:aws:dms:us-east-2:012363508593:task:MMO6WJX5CZ3A32VGGMTAL2UIMVW5BDOHLPFPRHI'}, 'ResponseMetadata': {'RequestId': '14250397-a72d-45ee-9154-26cf8589d041', 'HTTPStatusCode': 200, 'HTTPHeaders': {'x-amzn-requestid': '14250397-a72d-45ee-9154-26cf8589d041', 'date': 'Mon, 29 May 2023 21:32:41 GMT', 'content-type': 'application/x-amz-json-1.1', 'content-length': '5200'}, 'RetryAttempts': 0}}
2023.05.29 21:33:12 : Waiting for Replication Task to be in running mode - current status : starting
2023.05.29 21:33:42 : Waiting for Replication Task to be in running mode - current status : starting
2023.05.29 21:34:12 : Waiting for Replication Task to be in running mode - current status : running
2023.05.29 21:34:12 : arn:aws:dms:us-east-2:012363508593:rep:D2JPCUIHZYVACQINWOBP5KC2UCAQFT2E3QZFLIA
2023.05.29 21:34:12 : Created DMS migration task and now running.

